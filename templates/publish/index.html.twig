{% extends 'base.html.twig' %}

{% block title %}Hello PublishController!{% endblock %}

{% block body %}
    <style>
        .example-wrapper {
            margin: 1em auto;
            max-width: 800px;
            width: 95%;
            font: 18px/1.5 sans-serif;
        }

        .example-wrapper code {
            background: #F5F5F5;
            padding: 2px 6px;
        }
    </style>

    <div class="example-wrapper">
        <h1>Hello</h1>
        <div id="lolo">

        </div>

    </div>

{% endblock %}
{% block javascripts %}
    <script type="text/javascript">
        const eventSource = new EventSource('http://localhost:3000/.well-known/mercure?topic=' + encodeURIComponent('http://hotton.local/books/1'));
        eventSource.onmessage = event => {
            // Will be called every time an update is published by the server
            console.log(JSON.parse(event.data));
            $("#lolo").html(event.data);
        }
    </script>

{% endblock %}