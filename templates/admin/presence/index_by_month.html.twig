{% extends '@AcMarcheMercrediAdmin/layout.html.twig' %}

{% block body %}
    <h3>Liste des présences par mois</h3>
    <hr>

    {% include '@AcMarcheMercrediAdmin/presence/_search_by_month.html.twig' %}

    https://fullcalendar.io/ ??

    <table class="table table-bordered table-hover">
        <thead>
        <tr>
            <th>Nom</th>
            <th>Né le</th>
            {% for jourListing in listingPresences.joursListing %}
                <th class="text-center">{{ jourListing.jour|format_date('short') }}</th>
            {% endfor %}
            <th class="text-center">Total</th>
        </tr>
        </thead>
        <tbody>
        {% for enfant in listingPresences.enfants %}
            {% set i = 0 %}
            <tr>
                <td>
                    <a href="{{ path('mercredi_admin_enfant_show', { 'id': enfant.id }) }}">
                        {{ enfant }}
                    </a>
                </td>
                <td>{{ enfant.birthday ? enfant.birthday|format_datetime('short', 'none') }}</td>
                {% for jourListing in listingPresences.joursListing %}
                    <td class="text-center">
                        {% if jourListing.hasEnfant(enfant) %}
                            {% set i = i + 1 %}
                            <img src="{{ asset('bundles/acmarchemercredi/images/tick_16.png') }}" alt="ok">
                        {% endif %}
                    </td>
                {% endfor %}
                <td class="text-center">{{ i }}</td>
            </tr>
        {% endfor %}
        </tbody>
        <tfoot>
        <tr>
            <th>{{ listingPresences.enfants|length }} enfants</th>
            <td></td>
            {% for jourListing in listingPresences.joursListing %}
                <td class="text-center">{{ jourListing.enfants|length }} </td>
            {% endfor %}
            <td class="text-center">{{ listingPresences.presences | length }}</td>
        </tr>
        </tfoot>
    </table>

{% endblock %}
